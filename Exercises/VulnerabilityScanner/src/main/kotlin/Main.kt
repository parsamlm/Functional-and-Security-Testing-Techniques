package com.parsamlm

import java.io.File
import kotlin.system.exitProcess

const val FILE_FORMAT_INCORRECT_CODE = 100
const val FILE_NAME_INCORRECT_CODE = 101
fun main() {
    println(readFileDirectlyAsText(filePath = "src/main/kotlin/${getFileNameFromUser()}"))

}

fun readFileDirectlyAsText(filePath: String): String {
    var output = ""
    if (filePath.endsWith("json", true) || filePath.endsWith("xml", true) ||
        filePath.endsWith("yaml", true)
    ) {
        if (File(filePath).exists()) {
            output = File(filePath).readText(Charsets.UTF_8)
        } else {
            println("'File name' is incorrect! Try again..")
            exitProcess(FILE_NAME_INCORRECT_CODE)
        }
    } else {
        println("'File format' is incorrect! Try again..")
        exitProcess(FILE_FORMAT_INCORRECT_CODE)
    }
    return output
}

fun getFileNameFromUser(): String? {
    println("Enter the input file name (valid file formats: JSON, XML, and YAML):")
    return readlnOrNull()
}